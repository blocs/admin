---
description: 確認用モーダルの表示方法
globs: **/*.blocs.html, **/*.html
alwaysApply: false
---
# 確認用モーダルの表示方法
## 定義済みの確認用モーダルのブロック
データ登録前に確認を促すモーダルを表示したい場合は、Auto Include 機能を使うことで簡単に実装できます。以下のような確認用モーダルがあらかじめ定義されています。

|ブロック名|用途|
|:-----------|:-----------|
|modal_logout|ログアウト確認用|
|modal_store|新規作成確認用|
|modal_update|更新確認用|
|modal_destroy|削除確認用|

### サンプルコード
以下のように、HTMLタグに `data-include` 属性を追加することで、該当のモーダルを自動的に読み込むことができます。以下のコードを挿入すると、「更新確認モーダル」が表示されるようになります。
```html
<!-- data-include="modal_update" -->
```

## 変数を使ったモーダルのカスタマイズ方法
`data-include` 属性に **引数（変数）** を追加することで、モーダルの表示内容やボタンの見た目を柔軟にカスタマイズできます。必要に応じて、変数を組み合わせてモーダルの見た目や動作を細かく調整できます。

### サンプルコード
```html
<!--
    data-include="modal_update"
    $buttonIcon="fa-solid fa-file"
    $buttonLabel="ボタンのラベル"
-->
```

### モーダル本体のカスタマイズに使える変数
データを削除する時など、HTML5のバリデーションチェックが不要な時は `$modalNoValidate` を `true` にします。

|引数|説明|
|:-----------|:-----------|
|$modalName|モーダルの名前（任意の識別子）|
|$modalAction|モーダルで実行するアクションの遷移先|
|$modalClass|モーダル全体に適用するクラス|
|$modalTitle|モーダルのタイトル|
|$modalMessage|モーダル内に表示するメッセージ|
|$modalNoValidate|HTML5のバリデーションを無効にする|

### モーダルを開くボタンのカスタマイズ変数
|引数|説明|
|:-----------|:-----------|
|$buttonClass|モーダルを開くボタンのクラス|
|$buttonIcon|モーダルを開くボタンのアイコン|
|$buttonLabel|モーダルを開くボタンのラベル（表示名）|

### モーダル内の「戻る」ボタンのカスタマイズ変数
|引数|説明|
|:-----------|:-----------|
|$buttonModalBackClass|戻るボタンのクラス|
|$buttonModalBackIcon|戻るボタンのアイコン|
|$buttonModalBackLabel|戻るボタンのラベル（表示名）|

### モーダル内の「実行」ボタンのカスタマイズ変数
|引数|説明|
|:-----------|:-----------|
|$buttonModalClass|実行ボタンのクラス|
|$buttonModalIcon|実行ボタンのアイコン|
|$buttonModalLabel|実行ボタンのラベル（表示名）|

## 独自モーダルの作成方法
`data-include="modal"` を使うことで、簡単に独自のモーダルを作成できます。モーダルの各パーツは、必要に応じて個別に上書き・カスタマイズできます。

### カスタマイズ可能なブロック一覧
フォームを含むモーダルを作成したい場合は `modalBody` を使って内容を定義します。戻るボタンのみ変更したい場合は `modalFooterLeft` を、実行ボタンのみ変更したい場合は `modalFooterRight` を、フッター全体を変更したい場合は `modalFooter` を使ってください。

|ブロック名|説明|
|:-----------|:-----------|
|modal|モーダル全体の本体|
|modalBody|モーダル内の本文（フォームなど）|
|modalFooter|モーダルのフッター全体|
|modalFooterLeft|フッターの左側（戻るボタンなど）|
|modalFooterRight|フッターの右側（実行ボタンなど）|

### サンプルコード
```html
<!-- data-bloc="modalBody" -->
    <div class="row">
        <div>
            <!--
                $uploadMessage="ファイルをドラッグしてドロップしてください。"
                $uploadDelete="削除"
            -->
            <!-- :class="ai-upload is-invalid" data-exist=$errors->has("file") -->
            <input type="hidden" id="file" name="file" class="ai-upload" />
            <!-- !file="max:2000" data-lang="template:admin_profile_upload_too_large" -->
        </div>
    </div>
<!-- data-endbloc -->
<!-- data-bloc="modalFooterRight" -->
    <!--
        data-include="buttonPrimaryModal"
        $buttonModalLabel="インポート"
    -->
<!-- data-endbloc -->
<!--
    data-include="modal"
    $modalName="modalImport"
    $modalAction=route(prefix().".import")
    $modalTitle="インポート"
    $modalMessage="ファイルをインポートします。"
-->
```

### モーダル内で使用できるボタン一覧
以下のボタンは、`modalFooter`、`modalFooterLeft`、`modalFooterRight` で使用できます。

|ブロック名|説明|
|:-----------|:-----------|
|buttonBackModal|戻るボタン|
|buttonModal|通常ボタン|
|buttonPrimaryModal|青色の主ボタン|
|buttonInfoModal|水色の情報ボタン|
|buttonSuccessModal|緑色の成功ボタン|
|buttonDangerModal|赤色の警告ボタン|
|buttonWarningModal|黄色の注意ボタン|

## 独自モーダルの呼び出し方法
モーダルを動的に表示したい場合は、`data-modalaction` 属性を使用します。これにより、モーダルの遷移先（アクション）を、状況に応じて変更することができます。例えば、一覧画面で各行の `id` に応じたページをモーダルで表示する場合に便利です。

### サンプルコード
```html
<a data-bs-toggle="modal" data-bs-target="#modalImport" :data-modalaction=route(prefix().".import", ["id" => $user->id])>
    モーダル呼び出し
</a>
```
